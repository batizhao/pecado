<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.2.xsd">

    <changeSet author="batizhao" id="InsertTableMenu-20220120-002">
        <insert tableName="menu">
            <column name="id" valueNumeric="5000"/>
            <column name="path" value="/app"/>
            <column name="name" value="应用管理"/>
            <column name="icon" value="github"/>
            <column name="pid" valueNumeric="0"/>
            <column name="sort" valueNumeric="5"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="5100"/>
            <column name="path" value="/app/type"/>
            <column name="name" value="应用分类"/>
            <column name="permission" value="app:type:admin"/>
            <column name="icon" value="cascader"/>
            <column name="pid" valueNumeric="5000"/>
            <column name="sort" valueNumeric="1"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="5101"/>
            <column name="name" value="添加分类"/>
            <column name="permission" value="app:type:add"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="5100"/>
            <column name="sort" valueNumeric="1"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="5102"/>
            <column name="name" value="编辑分类"/>
            <column name="permission" value="app:type:edit"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="5100"/>
            <column name="sort" valueNumeric="2"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="5103"/>
            <column name="name" value="删除分类"/>
            <column name="permission" value="app:type:delete"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="5100"/>
            <column name="sort" valueNumeric="3"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="5200"/>
            <column name="path" value="/app/dev"/>
            <column name="name" value="应用开发"/>
            <column name="permission" value="app:dev:admin"/>
            <column name="icon" value="component"/>
            <column name="pid" valueNumeric="5000"/>
            <column name="sort" valueNumeric="1"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="5201"/>
            <column name="name" value="创建应用"/>
            <column name="permission" value="app:dev:add"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="5200"/>
            <column name="sort" valueNumeric="1"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="5202"/>
            <column name="name" value="编辑应用"/>
            <column name="permission" value="app:dev:edit"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="5200"/>
            <column name="sort" valueNumeric="2"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="5203"/>
            <column name="name" value="删除应用"/>
            <column name="permission" value="app:dev:delete"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="5200"/>
            <column name="sort" valueNumeric="3"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="5204"/>
            <column name="name" value="导入应用"/>
            <column name="permission" value="app:dev:import"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="5200"/>
            <column name="sort" valueNumeric="4"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="5205"/>
            <column name="name" value="导出应用"/>
            <column name="permission" value="app:dev:export"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="5200"/>
            <column name="sort" valueNumeric="5"/>
        </insert>
        <rollback>
            delete from menu where id = 5000;
            delete from menu where id = 5100;
            delete from menu where id = 5101;
            delete from menu where id = 5102;
            delete from menu where id = 5103;
            delete from menu where id = 5200;
            delete from menu where id = 5201;
            delete from menu where id = 5202;
            delete from menu where id = 5203;
            delete from menu where id = 5204;
            delete from menu where id = 5205;
        </rollback>
    </changeSet>

    <changeSet author="batizhao" id="InsertTableRoleMenu-20220120-003">
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="5000"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="5100"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="5101"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="5102"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="5103"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="5200"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="5201"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="5202"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="5203"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="5204"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="5205"/>
        </insert>
        <rollback>
            delete from role_menu where roleId = 2 and menuId = 5000;
            delete from role_menu where roleId = 2 and menuId = 5100;
            delete from role_menu where roleId = 2 and menuId = 5101;
            delete from role_menu where roleId = 2 and menuId = 5102;
            delete from role_menu where roleId = 2 and menuId = 5103;
            delete from role_menu where roleId = 2 and menuId = 5200;
            delete from role_menu where roleId = 2 and menuId = 5201;
            delete from role_menu where roleId = 2 and menuId = 5202;
            delete from role_menu where roleId = 2 and menuId = 5203;
            delete from role_menu where roleId = 2 and menuId = 5204;
            delete from role_menu where roleId = 2 and menuId = 5205;
        </rollback>
    </changeSet>

    <changeSet author="batizhao" id="DeleteTableData-20220308-001">
        <delete tableName="menu">
            <where>id=3300</where>
        </delete>
        <delete tableName="menu">
            <where>id=3301</where>
        </delete>
        <delete tableName="menu">
            <where>id=3302</where>
        </delete>
        <delete tableName="menu">
            <where>id=3303</where>
        </delete>
        <delete tableName="menu">
            <where>id=3100</where>
        </delete>
        <delete tableName="menu">
            <where>id=3101</where>
        </delete>
        <delete tableName="menu">
            <where>id=3102</where>
        </delete>
        <delete tableName="menu">
            <where>id=3103</where>
        </delete>
        <delete tableName="menu">
            <where>id=3104</where>
        </delete>
        <delete tableName="menu">
            <where>id=3105</where>
        </delete>
        <delete tableName="menu">
            <where>id=3106</where>
        </delete>

        <delete tableName="role_menu">
            <where>menuId=3300</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=3301</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=3302</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=3303</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=3100</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=3101</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=3102</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=3103</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=3104</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=3105</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=3106</where>
        </delete>
    </changeSet>

    <changeSet author="batizhao" id="AlterTable-20220309-001">
        <addColumn tableName="menu">
            <column name="appId" type="BIGINT" remarks="应用ID" defaultValue="0" afterColumn="pid">
                <constraints nullable="false"/>
            </column>
            <column name="scope" type="ENUM('dashboard', 'admin')" remarks="菜单范围" defaultValue="admin" afterColumn="appId">
                <constraints nullable="false" />
            </column>
            <column name="pageModelCode" type="VARCHAR(64)" remarks="页面模型编码" afterColumn="appId" />
            <column name="appPageCode" type="VARCHAR(64)" remarks="应用页面编码" afterColumn="appId" />
        </addColumn>
    </changeSet>

    <changeSet author="batizhao" id="InsertTableMenu-20220308-002">
        <insert tableName="menu">
            <column name="id" valueNumeric="100000"/>
            <column name="path" value="/task"/>
            <column name="name" value="我的任务"/>
            <column name="icon" value="documentation"/>
            <column name="scope" value="dashboard"/>
            <column name="pid" valueNumeric="1"/>
            <column name="sort" valueNumeric="1"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="110000"/>
            <column name="path" value="/task/todo"/>
            <column name="name" value="待办任务"/>
            <column name="permission" value="task:todo:list"/>
            <column name="icon" value="documentation"/>
            <column name="scope" value="dashboard"/>
            <column name="pid" valueNumeric="100000"/>
            <column name="sort" valueNumeric="1"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="120000"/>
            <column name="path" value="/task/doing"/>
            <column name="name" value="在办任务"/>
            <column name="permission" value="task:doing:list"/>
            <column name="icon" value="documentation"/>
            <column name="scope" value="dashboard"/>
            <column name="pid" valueNumeric="100000"/>
            <column name="sort" valueNumeric="2"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="130000"/>
            <column name="path" value="/task/done"/>
            <column name="name" value="已办任务"/>
            <column name="permission" value="task:done:list"/>
            <column name="icon" value="documentation"/>
            <column name="scope" value="dashboard"/>
            <column name="pid" valueNumeric="100000"/>
            <column name="sort" valueNumeric="3"/>
        </insert>
    </changeSet>

    <changeSet author="batizhao" id="InsertTableRoleMenu-20220308-003">
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="1"/>
            <column name="menuId" valueNumeric="100000"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="1"/>
            <column name="menuId" valueNumeric="110000"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="1"/>
            <column name="menuId" valueNumeric="120000"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="1"/>
            <column name="menuId" valueNumeric="130000"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="100000"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="110000"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="120000"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="130000"/>
        </insert>
    </changeSet>

    <changeSet author="batizhao" id="InsertTable-20220321-001">
        <insert tableName="menu">
            <column name="id" valueNumeric="3100"/>
            <column name="path" value="/dp/page/model"/>
            <column name="name" value="页面模型"/>
            <column name="permission" value="dp:page:model:admin"/>
            <column name="icon" value="cascader"/>
            <column name="pid" valueNumeric="3000"/>
            <column name="sort" valueNumeric="1"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="3101"/>
            <column name="name" value="添加页面模型"/>
            <column name="permission" value="dp:page:model:add"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="3100"/>
            <column name="sort" valueNumeric="1"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="3102"/>
            <column name="name" value="编辑页面模型"/>
            <column name="permission" value="dp:page:model:edit"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="3100"/>
            <column name="sort" valueNumeric="2"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="3103"/>
            <column name="name" value="删除页面模型"/>
            <column name="permission" value="dp:page:model:delete"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="3100"/>
            <column name="sort" valueNumeric="3"/>
        </insert>

        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="3100"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="3101"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="3102"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="3103"/>
        </insert>

        <delete tableName="menu">
            <where>id=4000</where>
        </delete>
        <delete tableName="menu">
            <where>id=4100</where>
        </delete>
        <delete tableName="menu">
            <where>id=4101</where>
        </delete>
        <delete tableName="menu">
            <where>id=4102</where>
        </delete>
        <delete tableName="menu">
            <where>id=4200</where>
        </delete>
        <delete tableName="menu">
            <where>id=4300</where>
        </delete>
        <delete tableName="menu">
            <where>id=4400</where>
        </delete>

        <delete tableName="role_menu">
            <where>menuId=4000</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=4100</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=4101</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=4102</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=4200</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=4300</where>
        </delete>
        <delete tableName="role_menu">
            <where>menuId=4400</where>
        </delete>

        <addColumn tableName="department">
            <column name="level" type="varchar(16)" remarks="部门级别" defaultValue="in" afterColumn="type">
                <constraints nullable="false" />
            </column>
        </addColumn>

        <insert tableName="menu">
            <column name="id" valueNumeric="2400"/>
            <column name="path" value="/system/config"/>
            <column name="name" value="配置管理"/>
            <column name="permission" value="system:config:admin"/>
            <column name="icon" value="example"/>
            <column name="pid" valueNumeric="2000"/>
            <column name="sort" valueNumeric="4"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="2401"/>
            <column name="name" value="添加配置"/>
            <column name="permission" value="system:config:add"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="2400"/>
            <column name="sort" valueNumeric="1"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="2402"/>
            <column name="name" value="编辑配置"/>
            <column name="permission" value="system:config:edit"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="2400"/>
            <column name="sort" valueNumeric="2"/>
        </insert>
        <insert tableName="menu">
            <column name="id" valueNumeric="2403"/>
            <column name="name" value="删除配置"/>
            <column name="permission" value="system:config:delete"/>
            <column name="type" value="B"/>
            <column name="pid" valueNumeric="2400"/>
            <column name="sort" valueNumeric="3"/>
        </insert>

        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="2400"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="2401"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="2402"/>
        </insert>
        <insert tableName="role_menu">
            <column name="roleId" valueNumeric="2"/>
            <column name="menuId" valueNumeric="2403"/>
        </insert>
    </changeSet>
</databaseChangeLog>